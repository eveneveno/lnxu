import{a as k,t as S,c as T}from"./disclose-version.Ckrn2PLg.js";import{g as l,j as a,i as x,m as C,a9 as A,s as _,t as D,l as t,o as I,x as w,w as M,ab as L,v as G,k as P,y as H}from"./index-client.C75Qpj4Y.js";import{e as z,i as E,b as J,p as Q,j}from"./props.meDx0K-t.js";import{s as y,h as V,e as q}from"./attributes.C2oiQdJS.js";import{c as B}from"./svelte-component.DG6SyfSz.js";import{a as K,S as N}from"./Story.BaCFuw_Q.js";import{b as f}from"./entry.CNGWrULx.js";import"./transform.BXP9HJX6.js";var O=S('<div class="interstitial-inner svelte-n6o9fa"><div class="sticker-set svelte-n6o9fa"><img class="icon svelte-n6o9fa" alt="mailbox sticker"></div> <p class="svelte-n6o9fa">Get The Pudding <br>in your inbox</p> <form action="https://buttondown.com/api/emails/embed-subscribe/thepudding" method="post" class="embeddable-buttondown-form svelte-n6o9fa"><input type="email" class="email-input svelte-n6o9fa" name="email" placeholder="you@example.com"> <input type="hidden" value="1" name="embed" class="svelte-n6o9fa"> <input type="submit" class="submit-input svelte-n6o9fa" value="Subscribe"></form></div>');function R(d){var n=O(),m=l(n),v=l(m);y(v,"src",`${f??""}/assets/stickers/mailbox@2x.png`),a(m),x(4),a(n),k(d,n)}function U(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}var W=S('<div class="interstitial-inner svelte-1cdiliy"><p class="svelte-1cdiliy">If you like our stories,<br> youâ€™ll love our merch</p> <div class="sticker-set svelte-1cdiliy"><img class="icon svelte-1cdiliy" alt="pudding tee with a skeleton working on a computer"> <img class="sticker-left svelte-1cdiliy" alt="a red and yellow technical sticker that reads The Pudding: Visual Data Stories About Just About Everything"> <img class="sticker-right svelte-1cdiliy" alt="a green blob sticker that reads Pudding Dot Cool"></div> <a href="https://the-pudding.printify.me/products" class="svelte-1cdiliy">Shop our swag</a></div>');function X(d,n){C(n,!0);let m=w(`${f}/assets/img/merch-tee-light.png`);const v=()=>{const e=U();M(m,z(e==="dark"?`${f}/assets/img/merch-tee-light.png`:`${f}/assets/img/merch-tee-dark.png`))};A(()=>{v();const e=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>{v()};return e.addEventListener("change",o),()=>{e.removeEventListener("change",o)}});var r=W(),i=_(l(r),2),c=l(i),p=_(c,2);y(p,"src",`${f??""}/assets/img/merch-sticker-left.png`);var u=_(p,2);y(u,"src",`${f??""}/assets/img/merch-sticker-right.png`),a(i),x(2),a(r),D(()=>y(c,"src",t(m))),k(d,r),I()}var Y=S('<p class="svelte-fhmh0z">Some of my favorite projects: <!>.</p> <div class="credit svelte-fhmh0z"><a class="svelte-fhmh0z"><img class="svelte-fhmh0z"> <p class="name svelte-fhmh0z"> </p> <p class="title svelte-fhmh0z">Pudding Staff</p></a></div>',1),Z=S('<div class="interstitial-inner svelte-fhmh0z"><!></div>');function ee(d,n){C(n,!0);const{stories:m,staff:v}=L("Home");let r=w(void 0),i=w(void 0);G(()=>{const e=m.filter(s=>s.faves),o=K(e)[0].faves.trim(),h=e.filter(s=>s.faves===o).slice(0,3);M(i,z(v.find(s=>s.id===o)));const g=h.map(({href:s,short:b})=>`<a href=${s} rel="external" class="bold-link">${b}</a>`).join(", ");M(r,z(g.replace(/,([^,]*)$/," and$1")))});var c=Z(),p=l(c);E(p,()=>t(r),u=>{var e=Y(),o=P(e),h=_(l(o));V(h,()=>t(r)),x(),a(o);var g=_(o,2),s=l(g),b=l(s),$=_(b,2),F=l($,!0);a($),x(2),a(s),a(g),D(()=>{y(s,"href",`${f??""}/author/${t(i).slug??""}`),y(b,"src",`${f??""}/common/assets/authors/${t(i).id??""}.jpg`),y(b,"alt",`headshot of ${t(i).name??""}`),J(F,t(i).name)}),k(u,e)}),a(c),k(d,c),I()}var se=S('<li class="svelte-lc01k1"><!></li>'),te=S('<section id="stories" class="svelte-lc01k1"><ul class="svelte-lc01k1"></ul></section>');function de(d,n){const m={Subscribe:R,Faves:ee,Merch:X};let v=Q(n,"resource",3,!1);var r=te(),i=l(r);q(i,21,()=>n.stories,c=>c.slug,(c,p)=>{var u=se();const e=H(()=>m[t(p).component]);var o=l(u);E(o,()=>t(e),h=>{var g=T(),s=P(g);B(s,()=>t(e),(b,$)=>{$(b,j(()=>t(p)))}),k(h,g)},h=>{N(h,j(()=>t(p),{get resource(){return v()}}))}),a(u),k(c,u)}),a(i),a(r),k(d,r)}export{de as S};
